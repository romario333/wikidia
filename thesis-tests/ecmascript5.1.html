<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <script src="lib/jquery-1.7.1.js"></script>
    <link rel="stylesheet" href="lib/qunit-v1.3.0pre.css" type="text/css" media="screen"/>
    <script type="text/javascript" src="lib/qunit-1.3.0pre.js"></script>


    <script>


        $(document).ready(function () {

            test("Constructor Function Without Strict Mode - DO NOT DO THIS!", function () {
                // DON'T USE CONSTRUCTOR FUNCTIONS!
                function Person() {
                    this.firstName = "Brandon";
                    this.lastName = "Eich";

                    this.toString = function () {
                        return this.firstName + " " + this.lastName;
                    };

                    return this;
                }

                // call constructor with new
                var person1 = new Person();
                equal(person1.toString(), "Brandon Eich");

                // now have a look what happens if we FORGET A NEW KEYWORD:
                var person2 = Person();

                // we have inadvertently REWRITTEN parts of WINDOW OBJECT!
                equal(person2, window);
                equal(window.toString(), "Brandon Eich"); // TODO: pada v IE9, WTF?
                equal(window.firstName, "Brandon");
                equal(window.lastName, "Eich");
            });

            test("Constructor Function in Strict Mode - Slightly Better", function () {
                "use strict";

                function Person() {
                    this.firstName = "Brandon";
                    this.lastName = "Eich";

                    this.toString = function () {
                        return this.firstName + " " + this.lastName;
                    };

                    return this; // return is actually not required here
                }

                raises(function () { var person2 = Person(); }, TypeError); // TypeError: Cannot set property 'firstName' of undefined
            });

            test("Syntax and semantic differences - without SyntaxError", function () {

                function es3() {
                    // TODO: this is actually new syntax resulting in
                    // trailing commas
                    equal([1, 2, ].length, 3);

                    // Infinity, NaN and undefined can be redefined in ES3
                    Infinity = 1;
                    NaN = 1;
                    undefined = 1;
                    equal(Infinity, 1);
                    equal(NaN, 1);
                    equal(undefined, 1);
                }

                function es5() {
                    // trailing commas
                    equal([1, 2, ].length, 2);

                    // TODO: proc tohle nefunguje?
                    Infinity = 1;
                    NaN = 1;
                    undefined = 1;
                    equal(Infinity, 1);
                    equal(NaN, 1);
                    equal(undefined, 1);
                }

                function es5Strict() {
                    "use strict";

                    // Infinity, NaN and undefined cannot be redefined in ES5/strict
                    raises(function () { Infinity = 1; }, TypeError); // TypeError: Cannot assign to read only property 'Infinity' of [object Window]
                    raises(function () { NaN = 1; }, TypeError); // TypeError: Cannot assign to read only property 'NaN' of [object Window]
                    raises(function () { undefined = 1; }, TypeError); // TypeError: Cannot assign to read only property 'undefined' of [object Window]
                }

                // TODO: dokazal bych ostatni browsery nejak donutit se prepnout do ES3 ?
                if ($.browser.msie && $.browser.version < 9) {
                    es3();
                } else {
                    es5();
                    // TODO: can I detect whether browser support strict mode?
                    es5Strict();
                }

                // TODO: ten parseInt nejak nefunguje equal(parseInt("08"), 8);
            });

        });
    </script>

    <script>
        $(document).ready(function () {

            // I have to keep this test in the standalone script as it causes syntax error in IE < 9
            test("Syntax and semantic differences - WITH SyntaxError", function () {

                // reserved word restriction on property names - removed in ES5
                var o = {function: "test"};
                equal(o.function, "test");

                // getters and setter
                o = {
                    get test() {
                        return "test";
                    }
                };
                equal(o.test, "test");

                // multi-line string literals?
                var s = "very long \
string";
                equal(s, "very long string");



            });
        });
    </script>


</head>
<body>
<h1 id="qunit-header">QUnit example</h1>

<h2 id="qunit-banner"></h2>

<div id="qunit-testrunner-toolbar"></div>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture">test markup, will be hidden</div>
</body>
</html>