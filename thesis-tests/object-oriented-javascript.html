<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <script src="lib/jquery-1.7.1.js"></script>
    <link rel="stylesheet" href="lib/qunit-v1.3.0pre.css" type="text/css" media="screen"/>
    <script type="text/javascript" src="lib/qunit-1.3.0pre.js"></script>

    <script>


        $(document).ready(function () {

            "use strict";

            module("Polymorphism");

            test("Duck-typing", function () {
                expect(1);

                var duck = {
                    quack: function () {
                        console.log("quack");
                    }
                };

                if (duck.quack) {
                    ok("Ducks quack, no surprise here.");
                    duck.quack();
                }

                if (duck.bark) {
                    fail("Ducks do not bark, obviously.")
                    duck.bark(); // this would fail
                }
            });

            test("Defective Duck", function () {
                expect(1);

                var duck = {quack: true};

                if (duck.quack) {
                    // TypeError: Property 'quack' of object #<Object> is not a function
                    raises(function () {duck.quack();}, TypeError);
                }

                if (duck.quack && typeof duck === "function") {
                    duck.quack();
                    fail("This duck should be defective and thus can't duck.");
                }
            });

            module("Information Hiding");

            test("Privacy with Closures", function () {
                function newUser(spec) {
                    var that = {}, // public interface
                        password = spec.password;

                    that.login = spec.login;

                    that.authenticate = function (aPassword) {
                        return password === aPassword;
                    };

                    return that;
                }

                var user = newUser({login: "eich", password: "secret"});

                equal(user.login, "eich");
                equal(user.password, undefined);
                equal(user.authenticate("secret"), true);
                equal(user.authenticate("bad secret"), false);
            });


            module("Inheritance");

            module("Prototype-based Inheritance");



            test("Prototype Chain - property setting and retrieval", function () {
                var person = {
                    firstName: "N/A",
                    lastName: "N/A",
                    fullName: function () {
                        return this.firstName + " " + this.lastName;
                    }
                };

                var brandon = Object.create(person);

                equal(brandon.firstName, "N/A");
                equal(brandon.lastName, "N/A");

                brandon.firstName = "Brandon";
                brandon.lastName = "Eich";

                equal(brandon.firstName, "Brandon");
                equal(brandon.lastName, "Eich");

                equal(person.firstName, "N/A");
                equal(person.lastName, "N/A");

                var axel = Object.create(person);
                axel.firstName = "Axel";

                equal(brandon.fullName(), "Brandon Eich");
                equal(axel.fullName(), "Axel N/A"); //TODO:
            });

            test("Inspecting prototype chain from code", function () {
                var person = {
                    firstName: "N/A",
                    lastName: "N/A"
                };

                var brandon = Object.create(person);

                equal(Object.getPrototypeOf(brandon), person);
                equal(Object.getPrototypeOf(person), Object.prototype);
                equal(Object.getPrototypeOf(Object.prototype), null);

                equal(brandon.__proto__, person);
                equal(person.__proto__, Object.prototype);
                equal(Object.prototype.__proto__, null);

                equal(person.isPrototypeOf(brandon), true);
                equal(Object.prototype.isPrototypeOf(brandon), true);
            });

            test("Prototype-based Inheritance with Constructor Functions", function () {
                function Person() {
                    this.firstName = "N/A";
                    this.lastName = "N/A";
                    // implicit return this
                }

                Person.prototype.fullName = function () {
                    return this.firstName + " " + this.lastName;
                };

                var brandon = new Person();
                brandon.firstName = "Brandon";
                brandon.lastName = "Eich";

                equal(brandon.fullName(), "Brandon Eich");

                var axel = new Person();
                axel.firstName = "Axel";
                axel.lastName = "TODO"; // TODO:

                equal(axel.fullName(), "Axel TODO");
            });

            test("Constructor Function can return whatever it wants", function () {
                var cat = {};

                function Dog() {
                    return cat;
                }

                var dog = new Dog();
                equal(dog, cat);
            });

        });




    </script>

</head>
<body>
<h1 id="qunit-header">QUnit example</h1>

<h2 id="qunit-banner"></h2>

<div id="qunit-testrunner-toolbar"></div>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture">test markup, will be hidden</div>
</body>
</html>