<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <script src="lib/jquery-1.7.1.js"></script>
    <link rel="stylesheet" href="lib/qunit-v1.3.0pre.css" type="text/css" media="screen"/>
    <script type="text/javascript" src="lib/qunit-1.3.0pre.js"></script>

    <script>


        $(document).ready(function () {

            "use strict";

            module("Object Creation");

            test("Object literals and Object.create", function () {
                var person1 = {
                    firstName: "Brandon",
                    lastName: "Eich",
                    toString: function () {
                        return this.firstName + " " + this.lastName;
                    }
                };

                equal(person1.toString(), "Brandon Eich");
                equal(person1.__proto__, Object.prototype);

                var person2 = Object.create(person1);
                person2.firstName = "Douglas";
                person2.lastName = "Crockford";

                equal(person1.toString(), "Brandon Eich");
                equal(person2.toString(), "Douglas Crockford");

                // there is only one toString function
                equal(person1.toString, person2.toString);

                // data properties are duplicated though
                notEqual(person1.firstName, person2.firstName);
                notEqual(person1.lastName, person2.lastName);

                // and person2's prototype is person1
                equal(person2.__proto__, person1);
            });

            test("Object.create - Closer Look", function () {
                var person1 = {
                    firstName: "Brandon",
                    lastName: "Eich",
                    toString: function () {
                        return this.firstName + " " + this.lastName;
                    }
                };

                equal(person1.toString(), "Brandon Eich");
                equal(person1.__proto__, Object.prototype);

                var person2 = Object.create(person1);

                equal(person1.firstName === person2.firstName, true);

                person2.firstName = "Douglas";

                equal(person1.firstName === person2.firstName, false);

            });

            test("Constructor Function - DO NOT DO THIS!", function () {
                // DON'T USE CONSTRUCTOR FUNCTIONS!
                function Person() {
                    this.firstName = "Brandon";
                    this.lastName = "Eich";

                    this.toString = function () {
                        return this.firstName + " " + this.lastName;
                    };

                    return this;
                }

                // call constructor with new
                var person = new Person();
                equal(person.toString(), "Brandon Eich");
            });



            test("Prototypal Inheritance pokus", function () {
                var person = {
                    firstName: "",
                    lastName: "",
                    get fullName() {
                        return this.firstName + " " + this.lastName;
                    }
                };

                var p1 = Object.create(person);
                var p2 = Object.create(person);

                p1.firstName = "haha";

                // TODO: jaktoze to funguje
                equal(p1.firstName, "haha");
                equal(p2.firstName, "");
            });



        });




    </script>

</head>
<body>
<h1 id="qunit-header">QUnit example</h1>

<h2 id="qunit-banner"></h2>

<div id="qunit-testrunner-toolbar"></div>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture">test markup, will be hidden</div>
</body>
</html>